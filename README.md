# CamIOT
해당 애플리케이션은 라즈베리파이 카메라와 인체 감지 센서를 활용하여 홈 보안 프로젝트입니다.

## 1. 주제 선정 배경 및 목표

* 1인 가구가 증가함에 따라 개인 CCTV의 설치가 늘어나고 있습니다. 이에 따라 CCTV를 활용한 홈 IOT 서비스가 활발하게 시행되고 있는데, 이러한 IOT CCTV에 인체 감지센서를 활용하여 보안에 중점을 둔 프로젝트를 구상하게 되었습니다.

* 최근 여성을 대상으로 한 성범죄나 스토킹 등의 문제가 나날이 늘어나고 있습니다. 또한, 보안이 취약한 구식 빌라에서의 도난사고도 꽤 빈번하게 일어나고 있기에 간편하게 집에 설치할 수 있는 홈 CCTV가 각광받고 있는 추세입니다.

* 이러한 트렌드에 맞춰 인체 감지센서와 카메라를 활용한 방범용 CAM IOT를 구현해 보는 것이 이번 프로젝트의 목표입니다


## 2. 시스템 구성도
### 2.1 시스템 구성도
  ![image](https://user-images.githubusercontent.com/59985098/136545931-cb35239f-dd3d-468f-8f9c-562a48f104ca.png)
  
 - 시스템은 크게 IOT 디바이스, Server, 사용자로 구성되어 있습니다. 
 
 - IOT 디바이스의 경우 움직임을 감지하는 RIP 센서와 WiFi 기능이 있는 아두이노인 WeMos D1 R1 보드로 구성되어 있습니다. 
 
 - 서버의 경우 라즈베리파이와 MQTT 서버의 역할을 하는 MQTT Broker인 Mosquitto, 화면을 전송해줄 라즈베리파이 카메라로 구성되어 있습니다. 
 
 - 사용자는 카메라의 CCTV 화면을 볼 수 있고, 제어가 가능하도록 안드로이드로 구성했습니다.
 
### 2.2 아두이노 회로도
![image](https://user-images.githubusercontent.com/59985098/136545996-99b00778-9099-4bc2-9389-c35aae9714b2.png)
 - 아두이노 회로의 구성으로는 WeMos D1 R1과 인체 감지센서, 그리고 보드판으로 이루어져 있습니다. 
 
 - WeMos D1 R1의 5V는 인체감지센서의 VCC와 연결하고, WeMos D1 R1의 A0는 인체감지센서의 OUT과 연결하고, 인체감지센서의 GND는 보드판의 13번째 –와 연결하고, 보드판의 14번째 –와 WeMos R1 D1의 GND와 연결합니다. 
 
 - 회로를 구성함으로써 인체 감지센서가 움직임을 감지하면, OUT으로 WeMos D1 R1의 A0로 전달해줘 감지가 가능하게 됩니다.
 
### 2.3 흐름도
![image](https://user-images.githubusercontent.com/59985098/136546022-48f098d7-cf9b-430d-ad9c-8ba984806bd9.png)
![image](https://user-images.githubusercontent.com/59985098/136546036-99bfad40-fb1d-4c28-ab21-b3afb973a12a.png)

 - 위의 그림과 같이 RIP 센서에서 움직임이 감지되면 아두이노로 움직임 감지 신호를 보내고, 아두이노는 MQTT 프로토콜로 MQTT Broker에게 토픽을 발행합니다. 
 
 - 위의 그림에서 MQTT Broker로 전송된 토픽은 안드로이드가 구독하고 있어 MQTT Broker는 안드로이드에게 MQTT 메시지를 전송합니다. 
 
 - 전송받은 안드로이드는 상단바에 움직임이 감지되었다는 알림을 보여줍니다. 
 
 - 사용자는 알림을 확인하고 안드로이드 앱을 켜 CCTV 화면을 확인할 수 있습니다. 또한, 화면을 확인한 사용자는 안드로이드 앱 내의 기능들을 사용할 수 있습니다.
 
## 3. 화면 구성 및 기능
![image](https://user-images.githubusercontent.com/59985098/136546065-53c6962f-7277-4d9e-8173-7a5fb026e271.png)

 - 앱의 메인화면의 UI는 크게 CCTV 화면을 보여주는 WebView와 CCTV 켜기 버튼, CCTV 끄기 버튼, 신고하기 버튼, 알림 켜기 버튼, 알림 끄기 버튼으로 구성되어 있습니다.

### 3.1 CCTV 확인 기능
 -  사용자는 앱을 접속해 WebView를 통해 라즈베리 카메라의 motion의 CCTV 화면을 확인 할 수 있습니다. 
 
### 3.2 CCTV 켜기 끄기 기능
 - 사용자는 CCTV 화면을 키고 싶다면 CCTV 켜기 버튼을 클릭하여 CCTV 화면을 킬 수 있고, CCTV 화면을 끄고 싶다면 CCTV 끄기 버튼을 클릭하여 CCTV 화면을 끌 수 있습니다.
 
### 3.3 신고하기 기능
![image](https://user-images.githubusercontent.com/59985098/136546085-28a26187-e65f-4ab1-b37e-99d24134eade.png)

 - 사용자는 CCTV 화면을 확인해 침입자가 있음을 확인하면 신고하기 버튼을 클릭하여 신고할 수 있습니다. 
 
 - 신고하기 버튼을 클릭한다면 전화 다이얼로그를 통해 자동으로 112에 전화를 바로 할 수 있도록 구성하였습니다.
 
### 3.4 알림 켜기/끄기 기능

 - 사용자는 알림을 키고 싶다면 알림 켜기 버튼을, 알림을 끄고 싶다면 알림 끄기 버튼을 클릭할 수 있습니다. 
 
 - 사용자가 집 내부에 있는 경우 알림 끄기 버튼을 클릭해 집에 있다는 것을 표시하여 알림이 안 오도록 할 수 있고, 사용자가 외출한 경우 알림 켜기 버튼을 통해 침입자를 방지할 수 있습니다.
 
### 3.5 움직임 감지 알림 기능
![image](https://user-images.githubusercontent.com/59985098/136546109-de45c308-8351-421c-a757-a32471ca3c93.png)

 - 사용자는 움직임 감지 기능을 통해 실시간으로 집의 움직임을 파악할 수 있습니다. 
 
 - 사용자가 외출한 집에서 외출한 경우 집에서 움직임이 발생했을 때 사용자에게 알림을 통해 움직임을 감지했다는 신호를 보낼 수 있습니다.
 
<br><br>

## 4. 시연동영상
 
## 5. 만든이
* **박원용** -*University : Sunkyul Univ* -
* **정은지** -*University : Sunkyul Univ* -






